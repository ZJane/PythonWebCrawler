<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <link rel="canonical" href="https://blog.csdn.net/u013431141/article/details/81488180"/> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="referrer" content="always">
    <meta name="description" content="背景在[grafana + prometheus + php监控系统实践]（https://zhuanlan.zhihu.com/p/41216181）文章当中已经实现了我们的第一个监控图表，现在我们有了一个新需求，需要对多个节点实现不同的监控，以及一个汇总的监控; 按照我们之前手动创建仪表盘的方法，每新增一个节点都需要手动去修改普罗米修斯配置，并且需要去grafana系统当中创建一个仪表盘，在节..." />
    <meta name="keywords" content="Grafana,prometheus" />
    <meta http-equiv="Cache-Control" content="no-siteapp" /><link rel="alternate" media="handheld" href="#" />
    <meta name="shenma-site-verification" content="5a59773ab8077d4a62bf469ab966a63b_1497598848">
    <script src="https://csdnimg.cn/release/phoenix/vendor/tingyun/tingyun-rum-blog.js"></script>

    <link href="https://csdnimg.cn/public/favicon.ico" rel="SHORTCUT ICON">
    <title>Grafana+prometheus+php 自动创建监控图 - CSDN博客</title>
    
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-d18c5189a1.min.css">
        <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-8195ccbe2d.min.css">

    <script type="text/javascript">
        var username = "u013431141";
        var blog_address = "https://blog.csdn.net/u013431141";
        var static_host = "https://csdnimg.cn/release/phoenix/";
        var currentUserName = ""; 
        var isShowAds = true;
        var isOwner = false;
        var loginUrl = "https://passport.csdn.net/account/login?from=https://blog.csdn.net/u013431141/article/details/81488180"
        var blogUrl = "https://blog.csdn.net/";
        //页面皮肤样式
        var curSkin = "skin3-template";
    </script>
    <script type="text/javascript">
        // Traffic Stats of the entire Web site By baidu
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?6bcd52f51e9b3dce32bec4a3997715ac";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
        // Traffic Stats of the entire Web site By baidu end
    </script>
    <script src="https://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="https://csdnimg.cn/rabbit/exposure-click/main-1.0.6.js"></script>
    <!-- 新版上报 -->
    <script src="//g.csdnimg.cn/track/1.0.1/track.js" type="text/javascript"></script>
    <!-- 新版上报end -->
            <link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.3/css/sandalstrap.min.css"> 
    <style>
        .MathJax, .MathJax_Message, .MathJax_Preview{
            display: none
        }
    </style>
</head>
<body>    
    <link rel="stylesheet" href="https://csdnimg.cn/public/common/toolbar/content_toolbar_css/content_toolbar.css">
    <script id="toolbar-tpl-scriptId" src="https://csdnimg.cn/public/common/toolbar/js/content_toolbar.js" type="text/javascript" domain="https://blog.csdn.net/"></script>
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/vendor/pagination/paging.css">
<script type="text/javascript" src="//static.mediav.com/js/mvf_news_feed.js"></script>
<div style="display:none;">
	<img src="" onerror='setTimeout(function(){if(!/(csdn.net|iteye.com|baiducontent.com|googleusercontent.com|360webcache.com|sogoucdn.com|bingj.com|baidu.com)$/.test(window.location.hostname)){window.location.href="\x68\x74\x74\x70\x73\x3a\x2f\x2f\x77\x77\x77\x2e\x63\x73\x64\x6e\x2e\x6e\x65\x74"}},3000);'>
</div>
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/chart-3456820cac.css" />



<script src="https://dup.baidustatic.com/js/ds.js"></script>
<div class="container clearfix pt0" id="mainBox">
		<div id="breadcrumbs">
			<span><a href="https://blog.csdn.net/">博客首页</a></span>
			<i>></i>
			<span><a href="https://blog.csdn.net/u013431141">u013431141的博客...</a></span>
			<i>></i>
			<span>Grafana+prometheus+php 自动创建监控图</span>
		</div>
    <main>
        <div class="blog-content-box">
	<div class="article-title-box">
			<span class="article-type type-1 float-left">原</span>		<h1 class="title-article">Grafana+prometheus+php 自动创建监控图</h1>
	</div>
	<div class="article-info-box">
		<div class="article-bar-top d-flex">
												<span class="time">2018年08月07日 20:41:50</span>
			<div class="float-right">
				<span class="read-count">阅读数：2</span>
											</div>
		</div>
	</div>
	<article>
		<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog"  data-mod=popu_307  data-dsm = "post" >
                    <div class="markdown_views">
                <h3 id="背景在grafana-prometheus-php监控系统实践httpszhuanlanzhihucomp41216181文章当中已经实现了我们的第一个监控图表现在我们有了一个新需求需要对多个节点实现不同的监控以及一个汇总的监控-按照我们之前手动创建仪表盘的方法每新增一个节点都需要手动去修改普罗米修斯配置并且需要去grafana系统当中创建一个仪表盘在节点很少的时候这种方式也能满足但当节点数量多起来的时候就会增加很大一部分工作量并且存在每次创建的图表规则不一致的风险因此我们的需求是在新增节点之后让grafana自动创建一个仪表盘">背景在[grafana + prometheus + php监控系统实践]（<a href="https://zhuanlan.zhihu.com/p/41216181" rel="nofollow">https://zhuanlan.zhihu.com/p/41216181</a>）文章当中已经实现了我们的第一个监控图表，现在我们有了一个新需求，需要对多个节点实现不同的监控，以及一个汇总的监控; 按照我们之前手动创建仪表盘的方法，每新增一个节点都需要手动去修改普罗米修斯配置，并且需要去grafana系统当中创建一个仪表盘，在节点很少的时候这种方式也能满足，但当节点数量多起来的时候，就会增加很大一部分工作量，并且存在每次创建的图表规则不一致的风险，因此我们的需求是在新增节点之后让grafana自动创建一个仪表盘。</h3>



<h2 id="实现过程">实现过程</h2>



<h3 id="操作步骤1prometheus调用中间件2中间件收集各节点数据3验证中间件数据有效性4调试仪表盘api接口5编写节点变动事件处理">操作步骤1.prometheus调用中间件2.中间件收集各节点数据3，验证中间件数据有效性4.调试仪表盘API接口5.编写节点变动事件处理</h3>



<h3 id="一普罗米修斯调用中间件">一，普罗米修斯调用中间件</h3>



<h4 id="1普罗米修斯修改配置文件修改配置文件的目的的英文把之前直接连接单个节点的地址更改为中间件地址之前单节点的uri为-api-v1-rrd-metrics-现在则需要将其修改为中间件地址-api-v1-rrd-toolspool-因此新的配置文件内容如下">1.普罗米修斯修改配置文件修改配置文件的目的的英文把之前直接连接单个节点的地址更改为中间件地址，之前单节点的URI为’== / API / V1 / RRD / metrics ==’，现在则需要将其修改为中间件地址’== / api / v1 / rrd / toolSpool ==’，因此新的配置文件内容如下：</h4>



<pre class="prettyprint"><code class=" hljs haml"> -<span class="ruby">-- 
</span>global：<font></font>
  scrape_interval ：5s <font></font>
  scrape_timeout：3s <font></font>
scrape_configs：<font></font>
-<span class="ruby"> <span class="hljs-symbol">job_name:</span> <span class="hljs-string">'mysql'</span>
</span>  scrape_interval: 5s<font></font>
  static_configs:<font></font>
    -<span class="ruby"> <span class="hljs-symbol">targets:</span> [<span class="hljs-string">'192.168.43.34:9104'</span>]
</span>      labels:<font></font>
        instance: 192.168.43.34<font></font>
<font></font>
-<span class="ruby"> <span class="hljs-symbol">job_name:</span> <span class="hljs-string">'media'</span>
</span>  scrape_interval: 3s<font></font>
  metrics_path: "/api/v1/rrd/toolSpool"<font></font>
  static_configs:<font></font>
    -<span class="ruby"> <span class="hljs-symbol">targets:</span> [<span class="hljs-string">'gslb.offcncloud.com:8080'</span>]</span></code></pre>



<h4 id="12-重新启动prometheus">1.2 重新启动prometheus</h4>

<p>当修改完配置文件之后，还需要让其配置文件生效，所以需要将prometheus重新启动。</p>

<p><strong>泊坞窗重启</strong>码头工人本身就提供重启命令，所以只需要输入如下命令就可以了，注意后面是容器的名称。</p>



<pre class="prettyprint"><code class=" hljs markdown">泊坞窗重启普罗米修斯<span class="hljs-code">```</span> 
<span class="hljs-strong">** MAC下重启**</span> MAC下重启比较简单，首先终止之前的任务，然后使用启动命令<font></font>
<font></font>
<font></font>
<font></font>
</code></pre>

<p>普罗米修斯–config.file = / TMP / prometheus.yml “` </p>



<h3 id="二中间件收集各节点数据">二，中间件收集各节点数据</h3>



<h4 id="21目的中间件的作用英文是将各个节点的数据进行汇总然后一次性返回给prometheus实现这个中间件的方式有很多种在实现之前我们也查找了一些资料比如有网友用-consul-template-consul-方式来实现可参考下方链接不过我觉得这个配置好像也不简单而这个中间件的功能还挺简单的所以还是自己使用php写了一个中间件参考资料httpblog51cto-com-xujpxm-1964878">2.1目的中间件的作用英文是将各个节点的数据进行汇总，然后一次性返回给prometheus，实现这个中间件的方式有很多种，在实现之前我们也查找了一些资料，比如有网友用<em>* consul-template + consul *</em>方式来实现，可参考下方链接;不过我觉得这个配置好像也不简单，而这个中间件的功能还挺简单的，所以还是自己使用PHP写了一个中间件。参考资料：http：//blog.51cto .com / xujpxm / 1964878</h4>



<h4 id="22-中间件需要的效果1拉取所有节点数据这是核心作用2给各节点加标示将来用来区分是哪个节点的">2.2 中间件需要的效果：1.拉取所有节点数据，这是核心作用2.给各节点加标示，将来用来区分是哪个节点的</h4>

<p>3.汇总并输出，需要一个汇总的仪表盘</p>



<h4 id="23获取节点数据并添加标示要获得各个节点的数据名称首先获得取得取到所有的节点列表然后通过节点的ip地址来拼接url最终通过卷曲请求该地址来得到节点数据-在获得数据后我们还小需要给每一个节点返回的数据加上标示可以用包括起来因为普罗米修斯支持这种格式伪代码如下">2.3获取节点数据，并添加标示要获得各个节点的数据，名称首先获得取得取到所有的节点列表，然后通过节点的IP地址来拼接URL，最终通过卷曲请求该地址来得到节点数据; 在获得数据后，我们还小需要给每一个节点返回的数据加上标示可以用{}包括起来，因为普罗米修斯支持这种格式，伪代码如下：</h4>

<p>““ <br>
 &lt;？php  <br>
public function getNodeListAttributesInfo（Request <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><merror><mtext>req&amp;#xFF09;&amp;#xA0;&amp;#xA0;{&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;//&amp;#xA0;1.&amp;#x83B7;&amp;#x53D6;&amp;#x8282;&amp;#x70B9;&amp;#x5217;&amp;#x8868;</mtext></merror></math>" role="presentation"><span class="math" id="MathJax-Span-1" style="vertical-align: 0.211em;" aria-hidden="true"><span class="noError" id="MathJax-Span-2" style="display: inline-block;">req）&nbsp;&nbsp;<br>{&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1.获取节点列表</span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><merror><mtext>req）&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1.获取节点列表</mtext></merror></math></span></span><script type="math/tex" id="MathJax-Element-11"> req）  
{   
    // 1.获取节点列表  
    </script> nodelist = RrdToolModel :: getNodeListAttributesInfo（</p>



<pre class="prettyprint"><code class=" hljs smalltalk">
#### <span class="hljs-number">2.4</span> 汇总并输出<font></font>
我们的核心需求是需要看到所有节点的汇总状况，所以在获得各个节点的数据后还需要进行累加，prometheus中貌似并直接不支持，所以我们得在中间件总进线累加汇总。<font></font>
``<font></font>
     //限制需要进行汇总统计，首先把字符串分割为数组<font></font>
    <span class="hljs-char">$ </span>arr = explode（<span class="hljs-class">PHP_EOL</span>，<span class="hljs-char">$ </span>str）; 
    <span class="hljs-char">$ </span>tmpArr = []; <font></font>
    //遍历数组<font></font>
    foreach（<span class="hljs-char">$ </span>arr as <span class="hljs-char">$ </span>val）{ <font></font>
        //把每一行再次分割<font></font>
        <span class="hljs-char">$ </span>valArr = explode（“”，<span class="hljs-char">$ </span>val）; <font></font>
        // <span class="hljs-number">5</span>。汇总统计<font></font>
        if（！empty（<span class="hljs-char">$ </span>valArr [<span class="hljs-number">0</span>]）&amp;&amp; is_string（<span class="hljs-char">$ </span>valArr [<span class="hljs-number">0</span>]）&amp;&amp; is_numeric（<span class="hljs-char">$ </span>valArr [<span class="hljs-number">2</span>]））{ 
            <span class="hljs-char">$ </span>tmpArr [<span class="hljs-char">$ </span>valArr [<span class="hljs-number">0</span>]] = isset（<span class="hljs-char">$ </span>tmpArr [<span class="hljs-char">$ </span>valArr [<span class="hljs-number">0</span>]]）？（<span class="hljs-char">$ </span>tmpArr [<span class="hljs-char">$ </span>valArr [<span class="hljs-number">0</span>]] + <span class="hljs-char">$ </span>valArr [<span class="hljs-number">2</span>]）：<span class="hljs-char">$ </span>valArr [<span class="hljs-number">2</span>]; <font></font>
        } <font></font>
    }     // <span class="hljs-number">6</span>。汇总输出    foreach（<span class="hljs-char">$ </span>tmpArr as <span class="hljs-char">$ </span>key =&gt; <span class="hljs-char">$ </span>num）{         echo“{<span class="hljs-char">$ </span>key} _total <span class="hljs-char">$ </span>num”。<span class="hljs-class">PHP_EOL</span>;     }     回声<span class="hljs-char">$海</span>峡; <font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
} <font></font>
`` #### <span class="hljs-number">2.5</span>输出最后结果<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
当中间件处理完成之后，我们需要各个节点的数据，并有在数据中需要有节点的标示，另外还需要一个汇总的数据，因此中间件返回数据如下：</code></pre>

<p>media_connectNum_total 0 <br>
media_network_total 0 <br>
media_on_push_total 2 <br>
media_connectNum {host=”192.168.43.46:8080”} 0 <br>
media_network {host=”192.168.43.46:8080”} 0 <br>
media_on_push {host=”192.168.43.46:8080”} 1 <br>
media_connectNum {host=”127.0.0.1:8080”} 0 <br>
media_network {host=”127.0.0.1:8080”} 0 <br>
media_on_push {host=”127.0.0.1:8080”} 1</p>



<pre class="prettyprint"><code class=" hljs http"><font></font>
<font></font>
<span class="ruby"><span class="hljs-comment">### 三、验证中间件数据有效性</span>

现在我们的prometheus已经启动，并且中间件也正常运行，那么此时prometheus和<span class="hljs-constant">Grafana</span>应该都有相应变化，我们可以根据这写变化来确定我们前面的处理是否成功。















<span class="hljs-comment">#### 3.3 设置汇总图</span>

















<span class="hljs-comment">#### 4.1 创建API接口</span>

我们的目标是当新增节点时grafana能够自动创建相应的仪表盘，因此需要使用到grafana的<span class="hljs-constant">API</span>接口，使用之前需要先创建一个密钥用来授权，创建的流程如下图：

![图片] （<span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/tuchuang.songboy.net/grafana</span><span class="hljs-regexp">/v2/</span><span class="hljs-number">5</span>.png ）添加一个api，在keyname中随便填写一个名字，然后角色选择管理权限，点击添加按钮！[ image ] （<span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/tuchuang.songboy.net/grafana</span><span class="hljs-regexp">/v2/</span><span class="hljs-number">6</span>.png ）当创建成功能看到grafana页面弹框提示，我们需要把他先复制下来放到一个位置，因为后面是看不见这个key的，如下命令：！[ image ] （<span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/tuchuang.songboy.net/grafana</span><span class="hljs-regexp">/v2/</span><span class="hljs-number">7</span>.png ）使用终端进行访问测试，如果返回结果如下，则代表这个键可以使用！[ image ] （<span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/tuchuang.songboy.net/grafana</span><span class="hljs-regexp">/v2/</span><span class="hljs-number">8</span>.png )












 <span class="hljs-comment">#### 4.2使用邮差调试</span>

现在不要急着取用<span class="hljs-constant">PHP</span>进行调试，可以先用<span class="hljs-constant">Postman</span>进行调试，我们需要调试的并不是刚才弹框上面的<span class="hljs-constant">URL</span>地址，而是创建一个仪表盘的地址，在官方文档中的请求信息如下：

</span></code></pre>

<p>POST /api/dashboards/db HTTP/1.1 <br>
Accept: application/json <br>
Content-Type: application/json <br>
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</p>

<p>{ <br>
  “dashboard”: { <br>
    “id”: null, <br>
    “uid”: null, <br>
    “title”: “Production Overview”, <br>
    “tags”: [ “templated” ], <br>
    “timezone”: “browser”, <br>
    “schemaVersion”: 16, <br>
    “version”: 0 <br>
  }, <br>
  “folderId”: 0, <br>
  “overwrite”: false <br>
}</p>



<pre class="prettyprint"><code class=" hljs mel">使用postman请求截图<font></font>
<font></font>
![<span class="hljs-keyword">image</span>](http:<span class="hljs-comment">//tuchuang.songboy.net/grafana/v2/9.png ）</span><font></font>
<font></font>
<font></font>
<font></font>
 <span class="hljs-string">``</span><span class="hljs-string">`
{
    “ID”：23， 
    “弹头”： “生产概述”， 
    “状态”： “成功”，
    “UID”： “ID2FFcciz”，
    “url”：“/ d / ID2FFcciz / production-overview”，
    “version”：1
}`</span><span class="hljs-string">`
当返回如上结果，则说明已经创建成功了


####4.3导出模板现在我们需要导出之前创建的一个节点仪表盘，用来做模板，导出仪表盘的配置方法比较简单，！[ image ] （http://tuchuang.songboy.net/grafana/v2/10.png ）把上面的json数据保存到grafana。







</span></code></pre>

<p>{ <br>
  “dashboard”:  <br>
  ——-导出json的内容放中间——–  <br>
  ， <br>
  “overwrite”：false  <br>
} “`  <br>
<strong>注意：</strong>，既然他是模板文件，里面肯定有些东西是变化的，比如说他的标题，和主属属性，因此我们得在模板里面做一个标示，比如title部分我们可以用### title ###，方便后面的文本替换，具体可参考我的[ 配置文件]（<a href="http://tuchuang.songboy.net/grafana/v2/grafana.json" rel="nofollow">http://tuchuang.songboy.net/grafana/v2/grafana.json</a> ）保存之后，也可以拿这个json的内容用postman进行验证，使用postman能够正常添加后，我们再使用PHP的curl去实现</p>



<h4 id="44编写php发起请求代码现在已经确保我们的json数据没有问题所以现在使用php的curl来创建仪表盘伪代码如下">4.4编写PHP发起请求代码现在已经确保我们的json数据没有问题，所以现在使用PHP的curl来创建仪表盘，伪代码如下：</h4>



<pre class="prettyprint"><code class=" hljs smalltalk"> / ** <font></font>
*通过curl获取数据<font></font>
* @param <span class="hljs-char">$ </span>url <font></font>
* @param bool <span class="hljs-char">$ </span>isHearder <font></font>
* @param bool <span class="hljs-char">$ </span>post <font></font>
* @return mixed <font></font>
* /<font></font>
function http_request(<span class="hljs-char">$u</span>rl, <span class="hljs-char">$i</span>sHearder = null, <span class="hljs-char">$p</span>ost = <span class="hljs-string">'GET'</span>, <span class="hljs-char">$d</span>ata = null, <span class="hljs-char">$t</span>imeout = <span class="hljs-number">1</span>)<font></font>
{<font></font>
    //初始化curl<font></font>
    <span class="hljs-char">$c</span>h = curl_init(<span class="hljs-char">$u</span>rl);<font></font>
<font></font>
    //设置<span class="hljs-class">URL</span>地址<font></font>
    curl_setopt(<span class="hljs-char">$c</span>h, <span class="hljs-class">CURLOPT_URL</span>, <span class="hljs-char">$u</span>rl);<font></font>
<font></font>
    //设置header信息<font></font>
    if (!empty(<span class="hljs-char">$i</span>sHearder)) {<font></font>
        curl_setopt(<span class="hljs-char">$c</span>h, <span class="hljs-class">CURLOPT_HEADER</span>, <span class="hljs-number">0</span>);<font></font>
        curl_setopt(<span class="hljs-char">$c</span>h, <span class="hljs-class">CURLOPT_HTTPHEADER</span>, <span class="hljs-char">$i</span>sHearder);<font></font>
    }<font></font>
    //如果是post，则把data的数据传递过去<font></font>
    if ((<span class="hljs-char">$p</span>ost == <span class="hljs-string">'POST'</span>) &amp;&amp; <span class="hljs-char">$d</span>ata) {<font></font>
        #假如data为数组将其转换为json格式<font></font>
        if (is_array(<span class="hljs-char">$d</span>ata)) {
            <span class="hljs-char">$d</span>ata = json_encode(<span class="hljs-char">$d</span>ata);<font></font>
        } <font></font>
        curl_setopt（<span class="hljs-char">$ </span><span class="hljs-class">CH</span>，<span class="hljs-class">CURLOPT_POST</span>，<span class="hljs-number">1</span>）; <font></font>
        curl_setopt（<span class="hljs-char">$ </span>ch，<span class="hljs-class">CURLOPT_POSTFIELDS</span>，<span class="hljs-char">$ </span>data）; <font></font>
    }     //如果是删除方法，则是以删除请求    if（<span class="hljs-char">$ </span>post ==<span class="hljs-string">'DELETE'</span>）{         curl_setopt（<span class="hljs-char">$ </span>ch，<span class="hljs-class">CURLOPT_CUSTOMREQUEST</span>，<span class="hljs-string">'DELETE'</span>）;     }     //设置超时时间，毫秒    curl_setopt（<span class="hljs-char">$ </span>ch，<span class="hljs-class">CURLOPT_CONNECTTIMEOUT_MS</span>，<span class="hljs-char">$ </span>timeout * <span class="hljs-number">1000</span>）;     curl_setopt（<span class="hljs-char">$ </span>ch，<span class="hljs-class">CURLOPT_RETURNTRANSFER</span>，<span class="hljs-number">1</span>）;     //执行<span class="hljs-class">CURL</span>时间    <span class="hljs-char">$ </span>result = curl_exec（<span class="hljs-char">$ </span>ch）;     //如果有异常，记录到日志当中    <span class="hljs-char">$ </span>curl_errno = curl_errno（<span class="hljs-char">$ </span>ch）;     if（<span class="hljs-char">$ </span>curl_errno&gt; <span class="hljs-number">0</span>）{         <span class="hljs-class">LogModel</span> :: addlog（<span class="hljs-string">'超时'</span>）;     }     //关闭<span class="hljs-class">URL</span>，返回数据    curl_close（<span class="hljs-char">$ </span>ch）;     返回<span class="hljs-char">$ </span>result; }<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
</code></pre>

<pre><code>    'Authorization: Bearer eyJrIjoicnhTMklodFMzaDRsUXFoUFFiZ2tSRnQ3TnI4WEVqQlEiLCJuIjoidGFuZ3Fpbmdzb25nIiwiaWQiOjF9'<font></font>
);<font></font>
//读取json模板<font></font>
$jsonstr = $this-&gt;readJsonData();<font></font>
<font></font>
//替换模板中需要替换的位置<font></font>
$jsonstr = str_replace('###node###', $ip, $jsonstr);<font></font>
$jsonstr = str_replace('###uid###', $uid, $jsonstr);<font></font>
<font></font>
//进行curl请求<font></font>
http_request('http://192.168.43.34:3000/api/dashboards/db', $header, 'POST', $jsonstr);<font></font>
</code></pre>

<p>}</p>



<pre class="prettyprint"><code class=" hljs markdown"><span class="hljs-header">#### 5.2 检查效果</span><font></font>
<font></font>
当使用PHP的curl请求后，我们可以在grafana的仪表盘管理界面看到使用PHP创建的图表，当出现下图的效果则代表成功：<font></font>
<font></font>
![<span class="hljs-link_label">image</span>](<span class="hljs-link_url">http://tuchuang.songboy.net/grafana/v2/11.png?1</span>)<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-header">#### 5.3 删除节点触发</span><font></font>
<font></font>
删除节点的时候，我们对应的仪表盘也没用了作用，因此我们也要删除对应的仪表盘，前面我们生产的uid是ip地址的hash值，因此我们删除的时候也可以取ip对应的hash值，通过这个uid来删除仪表盘，如下伪代码：<font></font>
</code></pre>

<p>/** <br>
 * 删除node节点视图信息 <br>
 * @param Request <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>r</mi><mi>e</mi><mi>q</mi><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>p</mi><mi>u</mi><mi>b</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>V</mi><mi>i</mi><mi>e</mi><mi>w</mi><mi>I</mi><mi>n</mi><mi>f</mi><mi>o</mi><mo stretchy=&quot;false&quot;>(</mo><mi>R</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>s</mi><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3" style="width: 23.388em; display: inline-block;"><span style="display: inline-block; position: relative; width: 19.482em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1019.48em, 2.867em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-4"><span class="mi" id="MathJax-Span-5" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-6" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-7" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-8" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">∗</span><span class="texatom" id="MathJax-Span-9" style="padding-left: 0.263em;"><span class="mrow" id="MathJax-Span-10"><span class="mo" id="MathJax-Span-11" style="font-family: STIXGeneral-Regular;">/</span></span></span><span class="mi" id="MathJax-Span-12" style="font-family: STIXGeneral-Italic;">p</span><span class="mi" id="MathJax-Span-13" style="font-family: STIXGeneral-Italic;">u</span><span class="mi" id="MathJax-Span-14" style="font-family: STIXGeneral-Italic;">b</span><span class="mi" id="MathJax-Span-15" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-16" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-17" style="font-family: STIXGeneral-Italic;">c</span><span class="mi" id="MathJax-Span-18" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mi" id="MathJax-Span-19" style="font-family: STIXGeneral-Italic;">u</span><span class="mi" id="MathJax-Span-20" style="font-family: STIXGeneral-Italic;">n</span><span class="mi" id="MathJax-Span-21" style="font-family: STIXGeneral-Italic;">c</span><span class="mi" id="MathJax-Span-22" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-23" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-24" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-25" style="font-family: STIXGeneral-Italic;">n</span><span class="mi" id="MathJax-Span-26" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-27" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-28" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-29" style="font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-30" style="font-family: STIXGeneral-Italic;">o</span><span class="mi" id="MathJax-Span-31" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-32" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-33" style="font-family: STIXGeneral-Italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-34" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-35" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-36" style="font-family: STIXGeneral-Italic;">w</span><span class="mi" id="MathJax-Span-37" style="font-family: STIXGeneral-Italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mi" id="MathJax-Span-38" style="font-family: STIXGeneral-Italic;">n</span><span class="mi" id="MathJax-Span-39" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mi" id="MathJax-Span-40" style="font-family: STIXGeneral-Italic;">o</span><span class="mo" id="MathJax-Span-41" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-42" style="font-family: STIXGeneral-Italic;">R</span><span class="mi" id="MathJax-Span-43" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-44" style="font-family: STIXGeneral-Italic;">q</span><span class="mi" id="MathJax-Span-45" style="font-family: STIXGeneral-Italic;">u</span><span class="mi" id="MathJax-Span-46" style="font-family: STIXGeneral-Italic;">e</span><span class="mi" id="MathJax-Span-47" style="font-family: STIXGeneral-Italic;">s</span><span class="mi" id="MathJax-Span-48" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi><mi>e</mi><mi>q</mi><mo>∗</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>p</mi><mi>u</mi><mi>b</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>l</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>V</mi><mi>i</mi><mi>e</mi><mi>w</mi><mi>I</mi><mi>n</mi><mi>f</mi><mi>o</mi><mo stretchy="false">(</mo><mi>R</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>s</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-12">req  
 */  
public function delNodeViewInfo(Request </script>req) <br>
{ <br>
    //接收参数 <br>
    <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>s</mi><mo>=</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-49" style="width: 4.846em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.013em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.93em, 1003.96em, 2.867em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-50"><span class="mi" id="MathJax-Span-51" style="font-family: STIXGeneral-Italic;">p</span><span class="mi" id="MathJax-Span-52" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-53" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-54" style="font-family: STIXGeneral-Italic;">a</span><span class="mi" id="MathJax-Span-55" style="font-family: STIXGeneral-Italic;">m</span><span class="mi" id="MathJax-Span-56" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-57" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>s</mi><mo>=</mo></math></span></span><script type="math/tex" id="MathJax-Element-13">params = </script>req-&gt;all(); <br>
    <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi><mi>p</mi><mo>=</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-58" style="width: 2.138em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.773em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1001.72em, 2.867em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-59"><span class="mi" id="MathJax-Span-60" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-61" style="font-family: STIXGeneral-Italic;">p</span><span class="mo" id="MathJax-Span-62" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mi>p</mi><mo>=</mo></math></span></span><script type="math/tex" id="MathJax-Element-14">ip = </script>params[‘ip’]; <br>
    <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mi>i</mi><mi>d</mi><mo>=</mo><mi>m</mi><mi>d</mi><mn>5</mn><mo stretchy=&quot;false&quot;>(</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-63" style="width: 5.732em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.742em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1004.69em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-64"><span class="mi" id="MathJax-Span-65" style="font-family: STIXGeneral-Italic;">u</span><span class="mi" id="MathJax-Span-66" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-67" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-68" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mi" id="MathJax-Span-69" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">m</span><span class="mi" id="MathJax-Span-70" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mn" id="MathJax-Span-71" style="font-family: STIXGeneral-Regular;">5</span><span class="mo" id="MathJax-Span-72" style="font-family: STIXGeneral-Regular;">(</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi><mi>i</mi><mi>d</mi><mo>=</mo><mi>m</mi><mi>d</mi><mn>5</mn><mo stretchy="false">(</mo></math></span></span><script type="math/tex" id="MathJax-Element-15">uid = md5(</script>ip);</p>

<pre><code>//设置认证信息<font></font>
$header = array(<font></font>
    "Content-Type:application/json",<font></font>
    'Authorization: Bearer eyJrIjoicnhTMklodFMzaDRsUXFoUFFiZ2tSRnQ3TnI4WEVqQlEiLCJuIjoidGFuZ3Fpbmdzb25nIiwiaWQiOjF9'<font></font>
);<font></font>
<font></font>
//执行删除事件<font></font>
http_request("http://192.168.43.34:3000/api/dashboards/uid/{$uid}", $header, 'DELETE');<font></font>
</code></pre>

<p>} “ <br>
作者：汤青松微信：songboy8888</p>            </div>
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css" />
                </div>
				<div class="hide-article-box text-center">
			<a class="btn btn-red-hollow" id="btn-readmore" data-track-view='{"mod":"popu_376","con":",https://blog.csdn.net/u013431141/article/details/81488180,"}' data-track-click='{"mod":"popu_376","con":",https://blog.csdn.net/u013431141/article/details/81488180,"}'>阅读更多</a>
		</div>
        	</article>
	
		<div class="article-bar-bottom">
				<div class="article-copyright">
			版权声明：作者：汤青松			https://blog.csdn.net/u013431141/article/details/81488180		</div>
						<div class="tags-box artic-tag-box">
			<span class="label">文章标签：</span>
						<a data-track-click='{"mod":"popu_626","con":"Grafana"}' data-track-view='{"mod":"popu_626","con":"Grafana"}' class="tag-link" href="http://so.csdn.net/so/search/s.do?q=Grafana&t=blog" target="_blank">Grafana						<a data-track-click='{"mod":"popu_626","con":"prometheus"}' data-track-view='{"mod":"popu_626","con":"prometheus"}' class="tag-link" href="http://so.csdn.net/so/search/s.do?q=prometheus&t=blog" target="_blank">prometheus						<a data-track-click='{"mod":"popu_626","con":"系统监控"}' data-track-view='{"mod":"popu_626","con":"系统监控"}' class="tag-link" href="http://so.csdn.net/so/search/s.do?q=系统监控&t=blog" target="_blank">系统监控						</a>
		</div>
						<div class="tags-box">
			<span class="label">个人分类：</span>
						<a class="tag-link" href="https://blog.csdn.net/u013431141/article/category/7916136"  target="_blank">运维						</a>
		</div>
							</div>
	
	<!-- !empty($pre_next_article[0]) -->
		</div>
<script>
    $(".MathJax").remove();
</script>

<!-- 博客详情页PC增加广告系统刷量代码 -->
<div id="a52b5334d" style="width: 1px; height: 1px; display: none;">
<script id="adJs52b5334"></script>
<script>document.getElementById("adJs52b5334").src = "https://ads.csdn.net/js/opt/52b5334.js?t=" + Math.random();</script>
</div>

<script type="text/javascript" src="https://static-blog.csdn.net/mdeditor/public/res/bower-libs/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
			"HTML-CSS": {
					linebreaks: { automatic: true, width: "94%container" },
					imageFont: null
			},
			tex2jax: {
				preview: "none"
			},
			mml2jax: {
				preview: 'none'
			}
	});
</script>
<script>
	(function(){
		var btnReadmore = $("#btn-readmore");
		if(btnReadmore.length>0){
			var winH = $(window).height();
			var articleBox = $("div.article_content");
			var artH = articleBox.height();
			if(artH > winH*2){
				articleBox.css({
					'height':winH*2+'px',
					'overflow':'hidden'
				})
				btnReadmore.click(function(){
					articleBox.removeAttr("style");
					$(this).parent().remove();
				})
			}else{
				btnReadmore.parent().remove();
			}
		}
	})()
</script>
        <div data-track-view='{"mod":"popu_625","con": ",https://blog.csdn.net/u013431141/article/details/81488180,from_360"}' style="margin-top: 8px;padding: 20px;background-color: #fff;overflow: hidden;" id="adt0"></div>
            <script>
                var adWidth = $("div.blog-content-box").outerWidth() - 40;
                NEWS_FEED({
                    w: adWidth,
                    h : 130,
                    showid : "s02a31",
                    placeholderId: "adt0",
                    inject : "define",
                    define : {
                    imagePosition : "left",
                    imageBorderRadius : 0,
                    imageWidth: 231,
                    imageHeight: 130,
                    imageFill : "clip",
                    displayImage : true,
                    displayTitle : true,
                    titleFontSize: 20,
                    titleFontColor: "#333",
                    titleFontFamily : "Microsoft Yahei",
                    titleFontWeight: "bold",
                    titlePaddingTop : 0,
                    titlePaddingRight : 0,
                    titlePaddingBottom : 10,
                    titlePaddingLeft : 16,
                    displayDesc : true,
                    descFontSize: 14,
                    descFontColor: "#6b6b6b",
                    descFontFamily : "Microsoft Yahei",
                    paddingTop : 0,
                    paddingRight : 0,
                    paddingBottom : 0,
                    paddingLeft : 0,
                    backgroundColor: "#fff",
                    hoverColor: "#ca0c16"
                    }
                })
            </script>        <a id="commentBox"></a>
<div class="comment-box">
	  	<div class="unlogin-box text-center">
		想对作者说点什么？
		<!-- $curl 当前地址 -->
		<a href="https://passport.csdn.net/account/login?from=https://blog.csdn.net/u013431141/article/details/81488180#commentBox" class="btn btn-sm btn-red">我来说一句</a>
	</div>
			<div class="comment-list-container">
		<a id="comments"></a>
		<div class="comment-list-box">
		</div>
		<div id="commentPage" class="pagination-box d-none"></div>
		<div class="opt-box text-center">
			<button class="btn btn-sm btn-link-blue" id="btnMoreComment"></button>
		</div>
	</div>
</div>        <div class="recommend-box">
            		<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/No_red/article/details/69788290,BlogCommendFromQuerySearch_0"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/No_red/article/details/69788290,BlogCommendFromQuerySearch_0"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/No_red/article/details/69788290" target="_blank" title="运维笔记40 Linux系统<em>监控</em>之Cacti（Cacti搭建，<em>自动</em>抓取cacti统计图片脚本）">
					运维笔记40 Linux系统<em>监控</em>之Cacti（Cacti搭建，<em>自动</em>抓取cacti统计图片脚本）				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/No_red" target="_blank">
						<img src="https://avatar.csdn.net/F/D/1/3_no_red.jpg" alt="No_red" class="avatar-pic">
						<span class="namebox">
							<span class="name">No_red</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">04-09</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						622</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/No_red/article/details/69788290" target="_blank" >
						概述：监控系统在一个系统中十分重要，它会将很多重要的信息，诸如内存信息，cpu信息，硬盘信息集合在一起显示出来，当系统出现问题的时候我们能及时定位并修复错误。今天介绍的监控系统是一款轻量级的监控系统C...					</a>
				</p>
		</div>
						<div class="img-box float-right">
				<a href="https://blog.csdn.net/No_red/article/details/69788290">
					<img src="https://csdnimg.cn/release/phoenix/article_rand_pic/ops/ops21.jpg" alt="">	
				</a>
			</div>
			</div>
					<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/xiegh2014/article/details/76572556,BlogCommendFromQuerySearch_1"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/xiegh2014/article/details/76572556,BlogCommendFromQuerySearch_1"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/xiegh2014/article/details/76572556" target="_blank" title="Zabbix3.2<em>监控</em>charts图形<em>自动</em>发送邮件">
					Zabbix3.2<em>监控</em>charts图形<em>自动</em>发送邮件				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/xiegh2014" target="_blank">
						<img src="https://avatar.csdn.net/1/E/7/3_xiegh2014.jpg" alt="xiegh2014" class="avatar-pic">
						<span class="namebox">
							<span class="name">xiegh2014</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">08-02</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						1484</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/xiegh2014/article/details/76572556" target="_blank" >
						#!/usr/bin/env python
# -*- coding: utf-8 -*-
import MySQLdb
import datetime
import cookielib, urlli...					</a>
				</p>
		</div>
						<div class="img-box float-right">
				<a href="https://blog.csdn.net/xiegh2014/article/details/76572556">
					<img src="https://csdnimg.cn/release/phoenix/article_rand_pic/mobile/mobile2.jpg" alt="">	
				</a>
			</div>
			</div>
														<div class="recommend-item-box recommend-ad-box">
						<script type="text/javascript" src="//cee1.iteye.com/pkcgstjjm.js"></script>
					</div>
							
				<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/chla/article/details/6441112,BlogCommendFromQuerySearch_2"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/chla/article/details/6441112,BlogCommendFromQuerySearch_2"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/chla/article/details/6441112" target="_blank" title="调频发射机<em>自动</em><em>监控</em>系统">
					调频发射机<em>自动</em><em>监控</em>系统				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/chla" target="_blank">
						<img src="https://avatar.csdn.net/B/0/B/3_chla.jpg" alt="chla" class="avatar-pic">
						<span class="namebox">
							<span class="name">chla</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">05-23</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						1964</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/chla/article/details/6441112" target="_blank" >
						http://www.gxbttc.net/materials/keji/2006/%B5%F7%C6%B5%B7%A2%C9%E4%BB%FA%D7%D4%B6%AF%BC%E0%BF%D8%CF%...					</a>
				</p>
		</div>
				</div>
					<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/tladagio/article/details/79185093,BlogCommendFromQuerySearch_3"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/tladagio/article/details/79185093,BlogCommendFromQuerySearch_3"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/tladagio/article/details/79185093" target="_blank" title="Zabbix<em>自动</em>发现主机并批量添加<em>监控</em>">
					Zabbix<em>自动</em>发现主机并批量添加<em>监控</em>				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/tladagio" target="_blank">
						<img src="https://avatar.csdn.net/1/6/B/3_tladagio.jpg" alt="tladagio" class="avatar-pic">
						<span class="namebox">
							<span class="name">tladagio</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">01-28</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						881</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/tladagio/article/details/79185093" target="_blank" >
						配置&gt;&gt;自动发现&gt;&gt;创建发现规则




添加发现规则




启用自动发现规则




配置&gt;&gt;动作&gt;&gt;选择自动发现&gt;&gt;创建动作




添加一个动作名称(等...					</a>
				</p>
		</div>
				</div>
						<div class="recommend-item-box recommend-download-box clearfix" data-track-view='{"mod":"popu_387","con":",https://download.csdn.net/download/wsea/10399717,BlogCommendFromQuerySearch_4"}' data-track-click='{"mod":"popu_387","con":",https://download.csdn.net/download/wsea/10399717,BlogCommendFromQuerySearch_4"}'>
			<div class="content float-left">
				<h4 class="text-truncate oneline">
					<a href="https://download.csdn.net/download/wsea/10399717" target="_blank">
						Zabbix最佳部署详解手册.pdf					</a>
				</h4>
				<p>
					<span class="data">2018年05月08日 </span>
					<span class="size">5.77MB</span>
					<span class="type">下载</span>
				</p>
			</div>
			<div class="img-box float-right">
				<a href="https://download.csdn.net/download/wsea/10399717" target="_blank" strategy="BlogCommendFromQuerySearch_4">
					<img src="https://csdnimg.cn/release/download/old_static/images/minetype/pdf.svg" alt="">
				</a>
			</div>
		</div>
					<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/yyy72999/article/details/76065374,BlogCommendFromQuerySearch_5"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/yyy72999/article/details/76065374,BlogCommendFromQuerySearch_5"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/yyy72999/article/details/76065374" target="_blank" title="zabbix <em>自动</em>发现/zabbix<em>自动</em>发现规则">
					zabbix <em>自动</em>发现/zabbix<em>自动</em>发现规则				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/yyy72999" target="_blank">
						<img src="https://avatar.csdn.net/4/8/8/3_yyy72999.jpg" alt="yyy72999" class="avatar-pic">
						<span class="namebox">
							<span class="name">yyy72999</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">07-25</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						1.1万</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/yyy72999/article/details/76065374" target="_blank" >
						对于zabbix 我们并不陌生 他是开源的监控系统，现在的一部分企业都在用zabbix，今天给大家分享的是企业级监控zabbix的自动发现规则，有了它我们自定义监控的时候根据宏值可以让他自动发现对应的...					</a>
				</p>
		</div>
				</div>
								<div class="recommend-item-box recommend-ad-box" id="a_d_feed_0"></div>
			<script>
				var width = $("div.recommend-box").outerWidth() - 48;
				NEWS_FEED({
					w: width,
					h: 60,
					showid: 'Afihld',
					placeholderId: 'a_d_feed_0',
					inject: 'define',
					define: {
						imagePosition: 'right',
						imageBorderRadius: 0,
						imageWidth: 90,
						imageHeight: 60,
						imageFill: 'clip',
						displayImage: true,
						displayTitle: true,
						titleFontSize: 20,
						titleFontColor: '#333',
						titleFontFamily: 'Microsoft Yahei',
						titleFontWeight: 'bold',
						titlePaddingTop: 0,
						titlePaddingRight: 0,
						titlePaddingBottom: 10,
						titlePaddingLeft: 0,
						displayDesc: true,
						descFontSize: 14,
						descPaddingLeft: 14,
						descFontColor: '#6b6b6b',
						descFontFamily: 'Microsoft Yahei',
						paddingTop: 0,
						paddingRight: 0,
						paddingBottom: 0,
						paddingLeft: 0,
						backgroundColor: '#fff',
						hoverColor: '#ca0c16'
					}
				})
			</script>
					<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/zhengguo38/article/details/80673645,BlogCommendFromQuerySearch_6"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/zhengguo38/article/details/80673645,BlogCommendFromQuerySearch_6"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/zhengguo38/article/details/80673645" target="_blank" title="Zabbix 3.4.8 通过Discovery批量<em>监控</em>Oracle表空间">
					Zabbix 3.4.8 通过Discovery批量<em>监控</em>Oracle表空间				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/zhengguo38" target="_blank">
						<img src="https://avatar.csdn.net/6/5/2/3_zhengguo38.jpg" alt="zhengguo38" class="avatar-pic">
						<span class="namebox">
							<span class="name">zhengguo38</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">06-13</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						106</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/zhengguo38/article/details/80673645" target="_blank" >
						一、Oracle客户端配置1、创建脚本check_tablespace.shOracle表空间的信息需要SQL语句查询得到，因此，我们首先创建一个获取表空间信息的原始脚本/home/oracle/ch...					</a>
				</p>
		</div>
				</div>
					<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/s_p_j/article/details/80489936,BlogCommendFromQuerySearch_7"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/s_p_j/article/details/80489936,BlogCommendFromQuerySearch_7"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/s_p_j/article/details/80489936" target="_blank" title="Zabbix自定义<em>监控</em>项、图形、触发器">
					Zabbix自定义<em>监控</em>项、图形、触发器				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/s_p_j" target="_blank">
						<img src="https://avatar.csdn.net/8/B/E/3_s_p_j.jpg" alt="s_p_j" class="avatar-pic">
						<span class="namebox">
							<span class="name">s_p_j</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">05-29</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						102</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/s_p_j/article/details/80489936" target="_blank" >
						监控Story：被监控终端连接数不能超过2，超过就触发报警。1.确定监控对象指标如何获取2.在agent节点上配置 UserParameter=&amp;amp;lt;key&amp;amp;gt;,&amp;amp;lt;...					</a>
				</p>
		</div>
						<div class="img-box float-right">
				<a href="https://blog.csdn.net/s_p_j/article/details/80489936">
					<img src="https://csdnimg.cn/release/phoenix/article_rand_pic/ops/ops25.jpg" alt="">	
				</a>
			</div>
			</div>
					<div class="recommend-item-box type_blog clearfix" data-track-view='{"mod":"popu_387","con":",https://blog.csdn.net/ayunyun/article/details/1543185,BlogCommendFromQuerySearch_8"}' data-track-click='{"mod":"popu_387","con":",https://blog.csdn.net/ayunyun/article/details/1543185,BlogCommendFromQuerySearch_8"}'>
		<div class="float-left">
			<h4 class="text-truncate oneline">
				<a href="https://blog.csdn.net/ayunyun/article/details/1543185" target="_blank" title="AJAX + SVG 实现实时<em>监控</em>图表">
					AJAX + SVG 实现实时<em>监控</em>图表				</a>
			</h4>
			<div class="info-box d-flex align-content-center">
				<p>
					<a class="avatar" src="https://blog.csdn.net/ayunyun" target="_blank">
						<img src="https://avatar.csdn.net/9/3/C/3_ayunyun.jpg" alt="ayunyun" class="avatar-pic">
						<span class="namebox">
							<span class="name">ayunyun</span>
							<span class="triangle"></span>
						</span>
					</a>
				</p>
				<p class="date-and-readNum">
					<span class="date hover-show">03-27</span>
					<span class="read-num hover-hide">
						<svg class="icon csdnc-yuedushu" aria-hidden="true">
							<use xlink:href="#csdnc-yuedushu"></use>
						</svg>
						886</span>
					</p>
				</div>
				<p class="content oneline">
					<a class="oneline" href="https://blog.csdn.net/ayunyun/article/details/1543185" target="_blank" >
						                                    AJAX + SVG 实现实时监控图表                                             ...					</a>
				</p>
		</div>
				</div>
						<div class="recommend-item-box recommend-download-box clearfix" data-track-view='{"mod":"popu_387","con":",https://download.csdn.net/download/gsgaoyf/2710445,BlogCommendFromQuerySearch_9"}' data-track-click='{"mod":"popu_387","con":",https://download.csdn.net/download/gsgaoyf/2710445,BlogCommendFromQuerySearch_9"}'>
			<div class="content float-left">
				<h4 class="text-truncate oneline">
					<a href="https://download.csdn.net/download/gsgaoyf/2710445" target="_blank">
						excel<em>创建</em>图excel<em>创建</em>图excel<em>创建</em>图excel<em>创建</em>图excel<em>创建</em>图					</a>
				</h4>
				<p>
					<span class="data">2010年09月21日 </span>
					<span class="size">12KB</span>
					<span class="type">下载</span>
				</p>
			</div>
			<div class="img-box float-right">
				<a href="https://download.csdn.net/download/gsgaoyf/2710445" target="_blank" strategy="BlogCommendFromQuerySearch_9">
					<img src="https://csdnimg.cn/release/download/old_static/images/minetype/doc.svg" alt="">
				</a>
			</div>
		</div>
			
            <div class="recommend-loading-box">
                <img src='https://csdnimg.cn/release/phoenix/images/feedLoading.gif'>
            </div>
            <div class="recommend-end-box">
                <p class="text-center">没有更多推荐了，<a href="https://blog.csdn.net/" class="c-blue c-blue-hover c-blue-focus">返回首页</a></p>
            </div>
        </div>
    </main>
    <aside>
		    <div id="asideProfile" class="aside-box">
    <h3 class="aside-title">个人资料</h3>
    <div class="profile-intro d-flex">
        <div class="avatar-box d-flex justify-content-center flex-column">
            <a href="https://blog.csdn.net/u013431141">
                <img src="https://avatar.csdn.net/F/F/2/3_u013431141.jpg" class="avatar_pic">
            </a>
        </div>
        <div class="user-info d-flex justify-content-center flex-column">
            <p class="name csdn-tracking-statistics tracking-click" data-mod="popu_379">
                <a href="https://blog.csdn.net/u013431141" target="_blank" class="text-truncate" id="uid">汤青松</a>
            </p>
                    </div>
                <div class="opt-box d-flex justify-content-center flex-column">
            <span  class="csdn-tracking-statistics tracking-click" data-mod="popu_379">
                                <a class="btn btn-sm btn-red-hollow" href="https://passport.csdn.net/account/login?from=https://blog.csdn.net/u013431141/article/details/81488180" target="_self">关注</a>
                            </span>
                    </div>
            </div>
    <div class="data-info d-flex item-tiling">
                <dl class="text-center" title="2">
                        <dt><a href="https://blog.csdn.net/u013431141?t=1">原创</a></dt>
            <dd><a href="https://blog.csdn.net/u013431141?t=1"><span class="count">2</span></a></dd>
                    </dl>
        <dl class="text-center" title="0">
            <dt>粉丝</dt>
            <dd><span class="count" id="fan">0</span></dd>
        </dl>
        <dl class="text-center" title="0">
            <dt>喜欢</dt>
            <dd><span class="count">0</span></dd>
        </dl>
        <dl class="text-center" title="0">
            <dt>评论</dt>
            <dd><span class="count">0</span></dd>
        </dl>
    </div>
    <div class="grade-box clearfix">
        <dl>
            <dt>等级：</dt>
            <dd>
                <a href="https://blog.csdn.net/home/help.html#level" title="1级,点击查看等级说明" target="_blank">
                    <svg class="icon icon-level" aria-hidden="true">
                        <use xlink:href="#csdnc-bloglevel-1"></use>
                    </svg>
                </a>
            </dd>
        </dl>
        <dl>
            <dt>访问：</dt>
            <dd title="4">
                4            </dd>
        </dl>
        <dl>
            <dt>积分：</dt>
            <dd title="20">
                20            </dd>
        </dl>
        <dl title="3462077">
            <dt>排名：</dt>
            <dd>346万+</dd>
        </dl>
    </div>
    </div>		    <div class="csdn-tracking-statistics mb8 box-shadow" data-pid="blog" data-mod="popu_4" style="height:250px;">
    <div class="aside-content text-center" id="cpro_u2734133">
      <!-- 广告位：PC-博客内页-百度联盟-300x250 -->
                      <script type="text/javascript" src="//cee1.iteye.com/lgyyovfyh.js"></script>    </div>
</div>
		    <div id="asideNewArticle" class="aside-box">
    <h3 class="aside-title">最新文章</h3>
    <div class="aside-content">
        <ul class="inf_list clearfix csdn-tracking-statistics tracking-click" data-mod="popu_382">
                        <li class="clearfix">
                <a href="https://blog.csdn.net/u013431141/article/details/81389460" target="_blank">grafana+ prometheus+php 监控系统实践</a>
            </li>
                    </ul>
    </div>
</div>
		    		    <div id="asideCategory" class="aside-box">
    <h3 class="aside-title">个人分类</h3>
    <div class="aside-content">
        <ul>
                        <li>
                <a href="https://blog.csdn.net/u013431141/article/category/7904152">
                    ÿ运维                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <li>
                <a href="https://blog.csdn.net/u013431141/article/category/7916136">
                    运维                    <span class="count float-right">1篇</span>
                </a>
            </li>
                    </ul>
    </div>
    </div>
		    <div id="asideArchive" class="aside-box">
    <h3 class="aside-title">归档</h3>
    <div class="aside-content">
        <ul class="archive-list">
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/u013431141/article/month/2018/08">
                    2018年8月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                    </ul>
    </div>
    </div>
		    <div id="asideHotArticle" class="aside-box">
	<h3 class="aside-title">热门文章</h3>
	<div class="aside-content">
		<ul class="hotArticle-list csdn-tracking-statistics tracking-click" data-mod="popu_521">
							<li>
					<a href="https://blog.csdn.net/u013431141/article/details/81389460">grafana+ prometheus+php 监控系统实践</a>
					<p class="read">阅读量：<span>11</span></p>
				</li>
							<li>
					<a href="https://blog.csdn.net/u013431141/article/details/81488180">Grafana+prometheus+php 自动创建监控图</a>
					<p class="read">阅读量：<span>0</span></p>
				</li>
					</ul>
	</div>
</div>
		    		<div id="asideFooter">
			
		<div class="aside-box">
						<script type="text/javascript" src="//cee1.iteye.com/avneunkwb.js"></script>
					</div>
				<div class="aside-box">
			<div class="persion_article">
			</div>
		</div>
	</div>
</aside>
<script src="https://csdnimg.cn/pubfooter/js/publib_footer-1.0.3.js" data-isfootertrack="false" type="text/javascript"></script>
<script>
	$("a.flexible-btn").click(function(){
		$(this).parents('div.aside-box').removeClass('flexible-box');
		$(this).remove();
	})
</script>
</div>
<div class="mask-dark"></div>
<div class="pulllog-box" style="display: block;">
	<div class="pulllog clearfix">
		<span class="text float-left">
			<!-- 广告位：PC-博客内页底通 文字链位置 -->
			<script>
			(function() {
				var s = "_" + Math.random().toString(36).slice(2);
				document.write('<div id="baidufooter_0001"></div>');
				(window.slotbydup=window.slotbydup || []).push({
					id: '5851901',
					container: 'baidufooter_0001',
					size: '520,40',
					display: 'inlay-fix'
				});
			})();
			</script>
			<script src="https://dup.baidustatic.com/js/os.js"></script>
			<style>
				#baidufooter_0001{
					display: none !important;
				}
			</style>
		</span>
		<div class="pulllog-btn float-right clearfix">
            <button class="pulllog-login float-left csdn-tracking-statistics tracking-click" data-mod="popu_557">
                登录
            </button>
            <div class="pulllog-sigin float-left csdn-tracking-statistics tracking-click" data-mod="popu_558">
                <a href="https://passport.csdn.net/account/mobileregister" target="_blank">注册</a>
            </div>
            <button class="btn-close">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#csdnc-times"></use>
                </svg>
            </button>
		</div>
	</div>
</div>
<div id="loginWrap" style="display:none"></div>
<div class="tool-box">
	<ul class="meau-list">
		<li>
			<button class="btn-like " title="点赞">
				<svg class="icon active" aria-hidden="true">
					<use xlink:href="#csdnc-thumbsup-ok"></use>
				</svg><svg class="icon no-active" aria-hidden="true">
					<use xlink:href="#csdnc-thumbsup"></use>
				</svg>
				<p>0</p>
			</button>
		</li>
		<li>
			<a class="btn-comments" title="写评论" href="#commentBox">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-comments"></use>
				</svg><br>写评论			</a>
		</li>
		<li class="toc-container-box" id="liTocBox">
			<button class="btn-toc" title="目录">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-contents"></use>
				</svg><br>目录
			</button>
			<div class="toc-container">
				<div class="pos-box">
					<div class="icon-arrow"></div>
					<div class="scroll-box">
						<div class="toc-box"></div>
					</div>
				</div>
				<div class="opt-box">
					<button class="btn-opt prev nomore" title="向上">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#csdnc-chevronup"></use>
						</svg>
					</button>
					<button class="btn-opt next">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#csdnc-chevrondown"></use>
						</svg>
					</button>
				</div>
			</div>
		</li>
		<li>
			<button class="btn-bookmark" title="收藏">
				<svg class="icon active" aria-hidden="true">
					<use xlink:href="#csdnc-bookmark-ok"></use>
				</svg><svg class="icon no-active" aria-hidden="true">
					<use xlink:href="#csdnc-bookmark"></use>
				</svg><br>收藏
			</button>
		</li>
				<li class="bdsharebuttonbox">
			<a class="btn-comments bds_weixin" data-cmd="weixin" title="微信分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-wechat"></use>
				</svg><br>微信
			</a>
		</li>
		<li class="bdsharebuttonbox">
			<a class="btn-comments bds_tsina" data-cmd="tsina" title="微博分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-weibo"></use>
				</svg><br>微博
			</a>
		</li>
		<li class="bdsharebuttonbox">
			<a class="btn-comments bds_qzone" data-cmd="qzone" title="QQ分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-qq"></use>
				</svg><br>QQ
			</a>
		</li>
	</ul>
</div>
<script>window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": "", "bdMini": "1", "bdMiniList": false, "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {} }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'https://csdnimg.cn/static/api/js/share.js?v=89860594'];</script>
<script>
    var recommendCount = 10;
    recommendCount = recommendCount > 1 ? (recommendCount + (recommendCount>6 ? 2 : 1)) : recommendCount;
    var articleTit = "Grafana+prometheus+php 自动创建监控图";
    var ChannelId = 12;
    var articleId = "81488180";
    var commentscount = 0;
    var islock = false;
    var curentUrl = "https://blog.csdn.net/u013431141/article/details/81488180";
    var myUrl = "https://my.csdn.net/";
    //1禁止评论，2正常
    var commentAuth = 2;
    //百度搜索
    var baiduKey = "";
    var needInsertBaidu = true;
    // 代码段样式
    var codeStyle = 'atom-one-dark';
    var highlight = ["grafana+prometheus+php","\u81ea\u52a8","\u521b\u5efa","\u76d1\u63a7"];//高亮数组
</script>
<script src="https://csdnimg.cn/public/sandalstrap/1.3/js/sandalstrap.min.js"></script>
<script src="https://csdnimg.cn/release/phoenix/vendor/pagination/paging.js"></script>
<script src='https://csdnimg.cn/public/common/gotop/js/goTop-v1.0.min.js?v201803151422'></script>
<script>
    GoTop({
        right: 8,
        hasReport: true,
        reportFun: function() {
            showReport(false,"Grafana+prometheus+php 自动创建监控图");
        }
    })
</script>
<script src="https://csdnimg.cn/release/phoenix/template/js/common-a4f198c74c.min.js"></script>
<script src="https://csdnimg.cn/release/phoenix/template/js/detail-bb796c2d26.min.js"></script>
<script src="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-73eea35575.min.js"></script>
</body>
<div class="box-box-aways">
    <a class="btn-remove">
        关闭
    </a>
    <div id="adAways">
        <script>
            (function() {
            (window.slotbydup=window.slotbydup || []).push({
            id: '5868728',
            container: 'adAways',
            size: '250,500',
            display: 'inlay-fix'
            });
            })();
            </script>
        <script src="https://dup.baidustatic.com/js/os.js"></script>
    </div>
</div>
<div class="box-box-default">
    <a class="btn-remove">
        关闭
    </a>
    <script type="text/javascript" src="//cee1.iteye.com/mhzzjepzz.js"></script>
</div>
<div class="box-box-large">
    <a class="btn-remove">
        关闭
    </a>
    <script type="text/javascript" src="//cee1.iteye.com/idvveasfs.js"></script>
</div>
<!-- 第四范式SDK -->

<!-- 高亮未与 markdown兼容  -->
</html>